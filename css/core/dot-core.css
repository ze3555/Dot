.dot-core {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  background: var(--dot-core-bg, #ffd400);
  box-shadow: 0 0 18px 0 rgba(0,0,0,0.16);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: box-shadow 0.25s, background 0.2s;
  position: relative;
  border: 3px solid var(--dot-core-border, #fff);
  z-index: 10;
}

/* hover/focus */
.dot-core:hover,
.dot-core:focus-visible {
  box-shadow: 0 0 22px 0 rgba(0,0,0,0.18);
  outline: none;
}

/* active */
.dot-core:active {
  transform: translateY(1px);
}

/* --- Цветовые темы --- */
body.theme-light .dot-core {
  background: var(--dot-core-bg, #ffd400);
  border-color: #fff;
}
body.theme-dark .dot-core {
  background: var(--dot-core-bg-dark, #2f2f33);
  border-color: #3a3a3e;
  box-shadow: 0 0 18px 0 rgba(0,0,0,0.2);
}
body.theme-dark .dot-core:hover,
body.theme-dark .dot-core:focus-visible {
  background: var(--dot-core-bg-dark-hover, #353538);
}

/* --- Адаптивное выпадающее меню: фиксированное положение --- */
.dot-core-menu {
  display: none;
  position: fixed; /* теперь всегда fixed, координаты выставляет JS */
  min-width: 220px;
  max-width: 96vw;
  padding: 16px 22px;
  background: var(--dot-menu-bg, #fff);
  border-radius: 22px;
  box-shadow: 0 8px 28px 0 rgba(0,0,0,0.12);
  border: 2px solid var(--dot-menu-border, #f2f2f2);
  z-index: 99999;
  flex-direction: row;
  gap: 22px;
  align-items: center;
  transition: background 0.2s, color 0.2s;
}

.dot-core-menu.open {
  display: flex;
}

body.theme-dark .dot-core-menu {
  background: var(--dot-menu-bg-dark, #232324);
  border-color: #232324;
  box-shadow: 0 8px 32px 0 rgba(0,0,0,0.24);
  color: #ededed;
}

/* Кнопки меню */
.dot-core-menu .menu-actions {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

/* Пилюли */
.dot-core-menu .pill {
  appearance: none;
  border: 1px solid var(--dot-menu-pill-border, #e9e9e9);
  background: var(--dot-menu-pill-bg, #fff);
  color: var(--dot-menu-pill-fg, #111);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 13px;
  line-height: 1;
  white-space: nowrap;
  text-decoration: none;
  cursor: pointer;
  transition: background 0.2s, color 0.2s, border-color 0.2s, box-shadow 0.2s;
}
.dot-core-menu .pill:active { transform: translateY(1px); }

body.theme-dark .dot-core-menu .pill {
  border-color: #3b3b3f;
  background: #2a2a2d;
  color: #f2f2f2;
}
body.theme-dark .dot-core-menu .pill:hover {
  background: #313135;
  border-color: #4a4a4e;
}

/* Заголовок меню (опционально) */
.dot-core-menu .menu-title {
  color: #6b6b6b;
  font-size: 12px;
  margin: 0 0 8px 2px;
}
body.theme-dark .dot-core-menu .menu-title {
  color: #bdbdbd;
}

/* Хвостики/указатели (опционально, если используются) */
.dot-core-menu .arrow {
  display: none;
}

/* Анимации появления/скрытия (если используются через классы) */
.dot-core-menu.fade-in {
  animation: dotMenuFadeIn 120ms ease-out;
}
.dot-core-menu.fade-out {
  animation: dotMenuFadeOut 120ms ease-in forwards;
}
@keyframes dotMenuFadeIn {
  from { opacity: 0; transform: translateY(-2px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes dotMenuFadeOut {
  from { opacity: 1; transform: translateY(0); }
  to   { opacity: 0; transform: translateY(-2px); }
}

/* Позиционирование меню относительно точки — управляет JS:
   добавляет data-pos: down-right | down-left | up-right | up-left */
.dot-core-menu[data-pos="down-right"] {}
.dot-core-menu[data-pos="down-left"]  {}
.dot-core-menu[data-pos="up-right"]   {}
.dot-core-menu[data-pos="up-left"]    {}

/* Внутренности меню — авто-ширина и перенос при узком экране */
.dot-core-menu .content {
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 140px;
}

/* Кнопки действий крупнее (если есть primary) */
.dot-core-menu .primary {
  font-weight: 600;
}

/* Сервисные кнопки внизу (иконки/настройки) */
.dot-core-menu .footer-actions {
  display: flex;
  gap: 10px;
  margin-top: 6px;
}

/* Состояния и цвета через CSS-переменные */
:root {
  --dot-core-bg: #ffd400;
  --dot-core-border: #fff;

  --dot-core-bg-dark: #2f2f33;
  --dot-core-bg-dark-hover: #353538;

  --dot-menu-bg: #fff;
  --dot-menu-border: #f2f2f2;

  --dot-menu-bg-dark: #232324;

  --dot-menu-pill-bg: #fff;
  --dot-menu-pill-border: #e9e9e9;
  --dot-menu-pill-fg: #111;

  --dot-menu-item-hover-color: #ffd400;
}
body.dragging-dotcore {
  overflow: hidden !important;
  touch-action: none !important;
}
.dot-core.dot-invert {
  background: #fff !important;
  border-color: #dedede !important;
  box-shadow: 0 0 18px 0 rgba(0,0,0,0.15) !important;
}
.dot-core {
  z-index: 2147483647 !important;
}